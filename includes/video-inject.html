<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    try {
      const offsetMeta = document.querySelector('meta[name="quarto:offset"]');
      const offset = offsetMeta ? offsetMeta.getAttribute("content") : "./";
      const pathname = window.location.pathname || "";

      // Only inject on pages under My_Song_for_You
      if (!pathname.includes("/My_Song_for_You/")) return;

      const container = document.createElement("div");
      container.className = "video-container";

      const video = document.createElement("video");
      video.setAttribute("controls", "");
      // poster should be an image, not the video file
      video.setAttribute("poster", offset + "audio/Puisi.mp4");

      const source = document.createElement("source");
      // use the actual filename present in the repo
      source.src = offset + "audio/Puisi.mp4";
      source.type = "video/mp4";
      video.appendChild(source);
      container.appendChild(video);

      const caption = document.createElement("div");
      caption.className = "video-caption";
      caption.textContent = "Why - A Poetry for You";

      const main =
        document.querySelector("main.content") ||
        document.querySelector("main");
      if (main) {
        const firstP = main.querySelector("p");
        if (firstP && firstP.parentNode) {
          firstP.parentNode.insertBefore(container, firstP.nextSibling);
          firstP.parentNode.insertBefore(caption, container.nextSibling);
        } else {
          main.appendChild(container);
          main.appendChild(caption);
        }
      }
    } catch (err) {
      console.error("video-inject error:", err);
    }
  });
</script>
